{"version":3,"sources":["assets/logo-light.svg","assets/icon-bicycle-400.svg","assets/icon-hamburger.svg","assets/icon-route.svg","assets/icon-vacation.svg","assets/icon-phone.svg","layout/header.js","utils/getGeolocation.js","utils/fetchTdxApi.js","assets/icon-bicycle-500.svg","assets/icon-bicycle-red.svg","assets/icon-bicycle-grey.svg","assets/icon-parking.svg","assets/icon-parking-red.svg","assets/icon-parking-grey.svg","assets/icon-user-position-mobile.svg","utils/decideByAvailability.js","components/bikeMap.js","assets/icon-collapse-top.svg","assets/icon-collapse-down.svg","assets/icon-sort.svg","assets/icon-geolocation.svg","assets/icon-bicycle-white.svg","assets/icon-parking-white.svg","components/filterNoResults.js","components/bikeResults.js","components/mapInfo.js","layout/main.js","App.js","index.js"],"names":["Logo","className","target","rel","href","src","logoSvg","alt","Header","props","useState","asyncGetGeolocation","options","enableHighAccuracy","timeout","maximumAge","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","data","coords","latitude","longitude","error","getRequestHeader","GMTString","Date","toGMTString","ShaObj","jsSHA","setHMACKey","process","update","Authorization","getHMAC","getAvailableBikes","userPosition","a","lat","lng","stationUrl","bikeUrl","allSettled","fetchTdxApi","result","value","stationData","bikeData","i","length","stationStatus","stationId","StationUID","stationName","StationName","Zh_tw","stationAddress","StationAddress","stationPosition","StationPosition","PositionLat","PositionLon","serviceStatus","ServiceStatus","availableRentBikes","AvailableRentBikes","availableReturnBikes","AvailableReturnBikes","srcUpdateTime","SrcUpdateTime","push","url","fetch","headers","response","json","decideByAvailability","source","resultNone","resultFew","resultNormal","BikeMap","bikesAvailable","isFindingBikes","bikeMapRef","useRef","userPositionMarkerRef","bikeMarkersRef","useEffect","current","L","map","attributionControl","zoomControl","center","zoom","layers","tileLayer","attribution","removeLayer","setView","userPositionIcon","icon","iconUrl","userPositionMobileSvg","iconSize","marker","addTo","forEach","bikeMarker","station","index","bikeMarkerStatusStyle_bikes","bikeMarkerStatusStyle_parks","availableBikesStyle","availableParksStyle","availableBikesImg","bicycleGreySvg","bicycleRedSvg","bicycle500Svg","availableParksImg","parkingGreySvg","parkingRedSvg","parkingSvg","divIcon","html","updateTime","exec","popupHtml","bindPopup","remove","id","filterNoResults","BikeResults","keyword","sortMethod","bikeResults","filter","includes","sort","stationA","stationB","stationAHour","stationAMinute","stationBHour","stationBMinute","stationStatusText","stationStatusStyle","MapInfo","handleLocateUser","isLocatingUser","handleFindingType","expandResultList","setExpandResultList","setKeyword","setSortMethod","collapseTip","onClick","isExpanded","collapseDownSvg","collapseTopSvg","locatingMessage","getLocationButton","disabled","geolocactionSvg","htmlFor","type","name","checked","onChange","hidden","bicycleWhiteSvg","bicycle400Svg","parkingWhiteSvg","placeholder","e","state","sortSvg","Main","setUserPosition","setBikesAvailable","setIsLocatingUser","setIsFindingBikes","userCoordinates","bikes","getBikes","bool","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a391678b.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo-light.0c6a71ad.svg\";","export default __webpack_public_path__ + \"static/media/icon-bicycle-400.b9d2a608.svg\";","export default __webpack_public_path__ + \"static/media/icon-hamburger.5ab53298.svg\";","export default __webpack_public_path__ + \"static/media/icon-route.6dc5afc7.svg\";","export default __webpack_public_path__ + \"static/media/icon-vacation.f4ddab30.svg\";","export default __webpack_public_path__ + \"static/media/icon-phone.da580534.svg\";","import { useState } from \"react\";\nimport \"./header.css\";\nimport logoSvg from \"../assets/logo-light.svg\";\nimport hamburgerSvg from \"../assets/icon-hamburger.svg\";\nimport bicycle400Svg from \"../assets/icon-bicycle-400.svg\";\nimport routeSvg from \"../assets/icon-route.svg\";\nimport vacationSvg from \"../assets/icon-vacation.svg\";\nimport phoneSvg from \"../assets/icon-phone.svg\";\n\nfunction Logo() {\n  return (\n    <h1 className=\"logo\">\n      <a\n        target=\"_blank\"\n        rel=\"noreferrer\"\n        href=\"https://github.com/krli07717/bikeland\"\n      >\n        <img src={logoSvg} alt=\"Bikeland\" />\n      </a>\n    </h1>\n  );\n}\n\nfunction Hamburger({ handleNavOpen }) {\n  return (\n    <button className=\"hamburger\" onClick={handleNavOpen}>\n      <img src={hamburgerSvg} alt=\"menu icon\" />\n    </button>\n  );\n}\n\nfunction Nav({ navOpen }) {\n  const navLinkInfo = [\n    {\n      linkPath: \"/\",\n      imgSrc: bicycle400Svg,\n      imgAlt: \"bicycle icon\",\n      linkText: \"找單車\",\n    },\n    {\n      linkPath: \"/route\",\n      imgSrc: routeSvg,\n      imgAlt: \"route icon\",\n      linkText: \"找路線\",\n    },\n    {\n      linkPath: \"/scene\",\n      imgSrc: vacationSvg,\n      imgAlt: \"vacation icon\",\n      linkText: \"找景點\",\n    },\n  ];\n\n  const emergencyPhone = (\n    <a href=\"tel: +886-800-001922\" className=\"emergency_phone\">\n      <div className=\"navlink_img\">\n        <img src={phoneSvg} alt=\"phone icon\" />\n      </div>\n      <h2 className=\"typography-bold typography-caption\">聯絡單車客服</h2>\n    </a>\n  );\n\n  return (\n    <nav className={navOpen ? \"\" : \"hide\"}>\n      <div className=\"nav_wrapper\">\n        {navLinkInfo.map(({ linkPath, imgSrc, imgAlt, linkText }) => (\n          <>\n            <div className=\"navlink_img\">\n              <img src={imgSrc} alt={imgAlt} />\n            </div>\n            <h2 className=\"typography-bold typography-caption\">{linkText}</h2>\n          </>\n        ))}\n      </div>\n      {emergencyPhone}\n    </nav>\n  );\n}\n\nfunction Header(props) {\n  const [navOpen, setNavOpen] = useState(false);\n\n  function handleNavOpen() {\n    setNavOpen((navOpen) => !navOpen);\n  }\n\n  return (\n    <header>\n      <div className=\"header_wrapper\">\n        <Logo />\n        {/* <Hamburger handleNavOpen={handleNavOpen} /> */}\n      </div>\n      {/* <Nav navOpen={navOpen} /> */}\n    </header>\n  );\n}\n\nexport default Header;\n","const asyncGetGeolocation = (\n  options = { enableHighAccuracy: true, timeout: 5000, maximumAge: 0 }\n) => {\n  return new Promise((resolve, reject) => {\n    function onResolve(data) {\n      resolve([data.coords.latitude, data.coords.longitude]);\n    }\n    function onReject(error) {\n      reject(error);\n    }\n    navigator.geolocation.getCurrentPosition(onResolve, onReject, options);\n  });\n};\n\nexport default asyncGetGeolocation;\n","import jsSHA from \"jssha/dist/sha1\";\n\nfunction getRequestHeader() {\n  const APP_ID = process.env.REACT_APP_APP_ID;\n  const APP_KEY = process.env.REACT_APP_APP_KEY;\n\n  const GMTString = new Date().toGMTString();\n  const ShaObj = new jsSHA(\"SHA-1\", \"TEXT\");\n  ShaObj.setHMACKey(APP_KEY, \"TEXT\");\n  ShaObj.update(\"x-date: \" + GMTString);\n  const HMAC = ShaObj.getHMAC(\"B64\");\n  const Authorization =\n    'hmac username=\"' +\n    APP_ID +\n    '\", algorithm=\"hmac-sha1\", headers=\"x-date\", signature=\"' +\n    HMAC +\n    '\"';\n\n  return {\n    Authorization: Authorization,\n    \"X-Date\": GMTString /*,'Accept-Encoding': 'gzip'*/,\n  }; //如果要將js運行在伺服器，可額外加入 'Accept-Encoding': 'gzip'，要求壓縮以減少網路傳輸資料量\n}\n\nexport async function getAvailableBikes(userPosition) {\n  try {\n    const [lat, lng] = userPosition;\n    const stationUrl = `https://ptx.transportdata.tw/MOTC/v2/Bike/Station/NearBy?$top=30&$spatialFilter=nearby(${lat},${lng},1000)&$format=JSON`;\n    const bikeUrl = `https://ptx.transportdata.tw/MOTC/v2/Bike/Availability/NearBy?$top=30&$spatialFilter=nearby(${lat},${lng},1000)&$format=JSON`;\n    const data = await Promise.allSettled([\n      fetchTdxApi(stationUrl),\n      fetchTdxApi(bikeUrl),\n    ]);\n    const result = [];\n    const [stationData, bikeData] = [data[0].value, data[1].value];\n    for (let i = 0; i < stationData.length; i++) {\n      let stationStatus = {\n        stationId: stationData[i].StationUID,\n        stationName: stationData[i].StationName.Zh_tw,\n        stationAddress: stationData[i].StationAddress.Zh_tw,\n        stationPosition: {\n          lat: stationData[i].StationPosition.PositionLat,\n          lng: stationData[i].StationPosition.PositionLon,\n        },\n        serviceStatus: bikeData[i].ServiceStatus,\n        availableRentBikes: bikeData[i].AvailableRentBikes,\n        availableReturnBikes: bikeData[i].AvailableReturnBikes,\n        srcUpdateTime: bikeData[i].SrcUpdateTime,\n      };\n      result.push(stationStatus);\n    }\n    return result;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport default async function fetchTdxApi(url) {\n  try {\n    const response = await fetch(url, { headers: getRequestHeader() });\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\n","export default __webpack_public_path__ + \"static/media/icon-bicycle-500.9f48f63e.svg\";","export default __webpack_public_path__ + \"static/media/icon-bicycle-red.90c43663.svg\";","export default __webpack_public_path__ + \"static/media/icon-bicycle-grey.e2b1d7d4.svg\";","export default __webpack_public_path__ + \"static/media/icon-parking.0d06e565.svg\";","export default __webpack_public_path__ + \"static/media/icon-parking-red.0b602e67.svg\";","export default __webpack_public_path__ + \"static/media/icon-parking-grey.84ff3ab7.svg\";","export default __webpack_public_path__ + \"static/media/icon-user-position-mobile.dbd42942.svg\";","export default function decideByAvailability(options) {\n  const { source, resultNone, resultFew, resultNormal } = options;\n  if (source === 0) return resultNone;\n  if (source <= 5) return resultFew;\n  return resultNormal;\n}\n","import bicycle500Svg from \"../assets/icon-bicycle-500.svg\";\nimport bicycleRedSvg from \"../assets/icon-bicycle-red.svg\";\nimport bicycleGreySvg from \"../assets/icon-bicycle-grey.svg\";\nimport parkingSvg from \"../assets/icon-parking.svg\";\nimport parkingRedSvg from \"../assets/icon-parking-red.svg\";\nimport parkingGreySvg from \"../assets/icon-parking-grey.svg\";\nimport userPositionMobileSvg from \"../assets/icon-user-position-mobile.svg\";\n\nimport { useEffect, useRef } from \"react\";\nimport decideByAvailability from \"../utils/decideByAvailability\";\nimport L from \"leaflet\";\n\nexport default function BikeMap({\n  userPosition,\n  bikesAvailable,\n  isFindingBikes,\n}) {\n  const bikeMapRef = useRef(null);\n  const userPositionMarkerRef = useRef(null);\n  const bikeMarkersRef = useRef([]);\n\n  //   create map\n  useEffect(() => {\n    if (bikeMapRef.current) return;\n    bikeMapRef.current = L.map(\"bike_map\", {\n      attributionControl: false,\n      zoomControl: false,\n      center: userPosition,\n      zoom: 15,\n      layers: [\n        L.tileLayer(\"http://{s}.tile.osm.org/{z}/{x}/{y}.png\", {\n          attribution:\n            '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n        }),\n      ],\n    });\n  }, []);\n\n  //  setView\n  useEffect(() => {\n    if (!bikeMapRef.current) return; //no map\n\n    // remove current user marker\n    if (userPositionMarkerRef.current)\n      bikeMapRef.current.removeLayer(userPositionMarkerRef.current);\n\n    bikeMapRef.current.setView(userPosition, 15);\n\n    // create icon\n    const userPositionIcon = L.icon({\n      iconUrl: userPositionMobileSvg,\n      iconSize: [56, 56],\n    });\n\n    // create marker\n    userPositionMarkerRef.current = L.marker(userPosition, {\n      icon: userPositionIcon,\n    });\n\n    // add marker\n    userPositionMarkerRef.current.addTo(bikeMapRef.current);\n  }, [userPosition]);\n\n  //setting bikeMarkers\n  useEffect(() => {\n    if (!bikeMapRef.current) return; //no map\n\n    //remove previous bike markers\n    bikeMarkersRef.current.forEach((bikeMarker) => {\n      // map remove bikeMarker\n      bikeMapRef.current.removeLayer(bikeMarker);\n    });\n\n    bikeMarkersRef.current = [];\n\n    bikesAvailable.forEach((station, index) => {\n      // assign created DivIcon to bikesRef\n\n      const bikeMarkerStatusStyle_bikes = decideByAvailability({\n        source: station.availableRentBikes,\n        resultNone: \"none\",\n        resultFew: \"few\",\n        resultNormal: \"\",\n      });\n\n      const bikeMarkerStatusStyle_parks = decideByAvailability({\n        source: station.availableReturnBikes,\n        resultNone: \"none\",\n        resultFew: \"few\",\n        resultNormal: \"\",\n      });\n\n      const availableBikesStyle = decideByAvailability({\n        source: station.availableRentBikes,\n        resultNone: \"none\",\n        resultFew: \"few\",\n        resultNormal: \"\",\n      });\n\n      const availableParksStyle = decideByAvailability({\n        source: station.availableReturnBikes,\n        resultNone: \"none\",\n        resultFew: \"few\",\n        resultNormal: \"\",\n      });\n\n      const availableBikesImg = decideByAvailability({\n        source: station.availableRentBikes,\n        resultNone: `<img src=${bicycleGreySvg} alt=\"bicycle icon\" />`,\n        resultFew: `<img src=${bicycleRedSvg} alt=\"bicycle icon\" />`,\n        resultNormal: `<img src=${bicycle500Svg} alt=\"bicycle icon\" />`,\n      });\n\n      const availableParksImg = decideByAvailability({\n        source: station.availableReturnBikes,\n        resultNone: `<img src=${parkingGreySvg} alt=\"parking icon\" />`,\n        resultFew: `<img src=${parkingRedSvg} alt=\"parking icon\" />`,\n        resultNormal: `<img src=${parkingSvg} alt=\"parking icon\" />`,\n      });\n\n      bikeMarkersRef.current[index] = L.marker(\n        [station.stationPosition.lat, station.stationPosition.lng],\n        {\n          icon: L.divIcon({\n            html: `<span class=\"bikeMarker_number typography-bold typography-button\">${\n              isFindingBikes\n                ? station.availableRentBikes\n                : station.availableReturnBikes\n            }</span>`,\n            className: `bikeMarker ${\n              isFindingBikes\n                ? bikeMarkerStatusStyle_bikes\n                : bikeMarkerStatusStyle_parks\n            }`,\n          }),\n        }\n      );\n\n      const updateTime = /.*T(\\d*:\\d*)/g.exec(station.srcUpdateTime)[1];\n\n      // bind popup to markers?\n      const popupHtml = `<div class=\"bikeMarkers_popup\">\n          <h3 class=\"typography-bold typography-button\">${station.stationName}</h3>\n          <div class=\"popup_info\">\n              <div class=\"popup_bikes ${availableBikesStyle}\">\n                  ${availableBikesImg}\n                  <span class=\"quantity typography-bold typography-button\">${station.availableRentBikes}</span>\n              </div>\n              <div class=\"popup_parks ${availableParksStyle}\">\n                  ${availableParksImg}\n                  <span class=\"quantity typography-bold typography-button\">${station.availableReturnBikes}</span>\n              </div>\n              <span class=\"update_time typography-medium typography-caption\">${updateTime}更新</span>\n          </div>\n        </div>`;\n\n      bikeMarkersRef.current[index].bindPopup(popupHtml, {\n        className: \"popupClass\",\n      });\n\n      // bikesRef.current[index] add to map\n      bikeMarkersRef.current[index].addTo(bikeMapRef.current);\n    });\n  }, [bikesAvailable, isFindingBikes]);\n\n  //clear map unmount\n  useEffect(() => {\n    return function clearMap() {\n      if (bikeMapRef.current) {\n        bikeMapRef.current.remove();\n        bikeMapRef.current = null;\n      }\n    };\n  }, []);\n\n  return <div id=\"bike_map\"></div>;\n}\n","export default __webpack_public_path__ + \"static/media/icon-collapse-top.269c0cf4.svg\";","export default __webpack_public_path__ + \"static/media/icon-collapse-down.a7d0baff.svg\";","export default __webpack_public_path__ + \"static/media/icon-sort.f7f91b6d.svg\";","export default __webpack_public_path__ + \"static/media/icon-geolocation.7783d3dc.svg\";","export default __webpack_public_path__ + \"static/media/icon-bicycle-white.60cb5498.svg\";","export default __webpack_public_path__ + \"static/media/icon-parking-white.95eab66a.svg\";","const filterNoResults = (\n  <h3 className=\"no_results typography-bold typography-h5\">\b沒有搜尋結果</h3>\n);\n\nexport default filterNoResults;\n","import parkingSvg from \"../assets/icon-parking.svg\";\nimport parkingRedSvg from \"../assets/icon-parking-red.svg\";\nimport parkingGreySvg from \"../assets/icon-parking-grey.svg\";\n\nimport bicycle500Svg from \"../assets/icon-bicycle-500.svg\";\nimport bicycleRedSvg from \"../assets/icon-bicycle-red.svg\";\nimport bicycleGreySvg from \"../assets/icon-bicycle-grey.svg\";\n\nimport filterNoResults from \"./filterNoResults\";\nimport decideByAvailability from \"../utils/decideByAvailability\";\n\nexport default function BikeResults({ bikesAvailable, keyword, sortMethod }) {\n  const sortMethods = {\n    0: (stationA, stationB) => 0, //fetched default\n    1: (stationA, stationB) =>\n      stationB.availableRentBikes - stationA.availableRentBikes,\n    2: (stationA, stationB) =>\n      stationB.availableReturnBikes - stationA.availableReturnBikes,\n    3: (stationA, stationB) => {\n      const stationAHour = /.*T(\\d*)/g.exec(stationA.srcUpdateTime)[1];\n      const stationAMinute = /.*T\\d*:(\\d*)/g.exec(stationA.srcUpdateTime)[1];\n      const stationBHour = /.*T(\\d*)/g.exec(stationB.srcUpdateTime)[1];\n      const stationBMinute = /.*T\\d*:(\\d*)/g.exec(stationB.srcUpdateTime)[1];\n      if (stationAHour === stationBHour) return stationBMinute - stationAMinute;\n      return stationBHour - stationAHour;\n    },\n  };\n\n  const bikeResults = bikesAvailable\n    .filter((station) => {\n      if (!keyword) return true;\n      return (\n        station.stationName.includes(keyword) ||\n        station.stationAddress.includes(keyword)\n      );\n    })\n    .sort(sortMethods[sortMethod])\n    .map((station) => {\n      const stationStatusText =\n        station.serviceStatus !== 1\n          ? \"未營運\"\n          : station.availableRentBikes > 0 && station.availableReturnBikes > 0\n          ? \"可借可還\"\n          : station.availableReturnBikes > 0\n          ? \"只可停車\"\n          : \"只可借車\";\n      const stationStatusStyle =\n        station.serviceStatus !== 1\n          ? \"off\"\n          : station.availableRentBikes === 0 ||\n            station.availableReturnBikes === 0\n          ? \"limited\"\n          : \"\";\n\n      const availableBikesStyle = decideByAvailability({\n        source: station.availableRentBikes,\n        resultNone: \"none\",\n        resultFew: \"few\",\n        resultNormal: \"\",\n      });\n\n      const availableParksStyle = decideByAvailability({\n        source: station.availableReturnBikes,\n        resultNone: \"none\",\n        resultFew: \"few\",\n        resultNormal: \"\",\n      });\n\n      const availableBikesImg = decideByAvailability({\n        source: station.availableRentBikes,\n        resultNone: <img src={bicycleGreySvg} alt=\"bicycle icon\" />,\n        resultFew: <img src={bicycleRedSvg} alt=\"bicycle icon\" />,\n        resultNormal: <img src={bicycle500Svg} alt=\"bicycle icon\" />,\n      });\n\n      const availableParksImg = decideByAvailability({\n        source: station.availableReturnBikes,\n        resultNone: <img src={parkingGreySvg} alt=\"parking icon\" />,\n        resultFew: <img src={parkingRedSvg} alt=\"parking icon\" />,\n        resultNormal: <img src={parkingSvg} alt=\"parking icon\" />,\n      });\n\n      const updateTime = /.*T(\\d*:\\d*)/g.exec(station.srcUpdateTime)[1];\n      const stationName = /(YouBike)?(.*)/g.exec(station.stationName)[2];\n      return (\n        <div className=\"bike_result\" key={station.stationId}>\n          <div className=\"info\">\n            <h3 className=\"typography-bold typography-button\">{stationName}</h3>\n            <span\n              className={`status ${stationStatusStyle} typography-medium typography-caption`}\n            >\n              {stationStatusText}\n            </span>\n            <span className=\"distance typography-medium typography-caption\">\n              {`${updateTime} 更新`}\n            </span>\n          </div>\n          <div className=\"available\">\n            <div className={`available_bikes ${availableBikesStyle}`}>\n              {availableBikesImg}\n              <span className=\"typography-medium typography-button\">\n                可租借\n              </span>\n              <span className=\"quantity typography-bold typography-h5\">\n                {station.availableRentBikes}\n              </span>\n            </div>\n            <div className={`available_parks ${availableParksStyle}`}>\n              {availableParksImg}\n              <span className=\"typography-medium typography-button\">\n                可停車\n              </span>\n              <span className=\"quantity typography-bold typography-h5\">\n                {station.availableReturnBikes}\n              </span>\n            </div>\n          </div>\n        </div>\n      );\n    });\n\n  return bikeResults.length ? bikeResults : filterNoResults;\n}\n","import collapseTopSvg from \"../assets/icon-collapse-top.svg\";\nimport collapseDownSvg from \"../assets/icon-collapse-down.svg\";\nimport sortSvg from \"../assets/icon-sort.svg\";\nimport bicycle400Svg from \"../assets/icon-bicycle-400.svg\";\nimport geolocactionSvg from \"../assets/icon-geolocation.svg\";\nimport bicycleWhiteSvg from \"../assets/icon-bicycle-white.svg\";\nimport parkingSvg from \"../assets/icon-parking.svg\";\nimport parkingWhiteSvg from \"../assets/icon-parking-white.svg\";\n\nimport { useState } from \"react\";\nimport BikeResults from \"./bikeResults\";\n\nexport default function MapInfo({\n  handleLocateUser,\n  bikesAvailable,\n  isLocatingUser,\n  handleFindingType,\n  isFindingBikes,\n}) {\n  const [expandResultList, setExpandResultList] = useState(false);\n  const [keyword, setKeyword] = useState(\"\");\n  const [sortMethod, setSortMethod] = useState(0);\n\n  function handleSortResults() {\n    setSortMethod((state) => ++state % 4);\n  }\n\n  function handleExpandResultList() {\n    setExpandResultList((isExpanded) => !isExpanded);\n  }\n\n  function handleSetKeyword(e) {\n    setKeyword(e.target.value);\n  }\n\n  const collapseTip = (\n    <div className=\"collapse\" onClick={handleExpandResultList}>\n      {expandResultList ? (\n        <img src={collapseDownSvg} alt=\"collapse down icon\" />\n      ) : (\n        <img src={collapseTopSvg} alt=\"collapse top icon\" />\n      )}\n    </div>\n  );\n  const locatingMessage = (\n    <div className=\"locating_message\">\n      <span className=\"typography-bold typography-h4\">定位中</span>\n    </div>\n  );\n\n  const getLocationButton = (\n    <button\n      className=\"geolocation\"\n      disabled={isLocatingUser ? true : false}\n      onClick={handleLocateUser}\n    >\n      <img src={geolocactionSvg} alt=\"geo location icon\" />\n    </button>\n  );\n\n  return (\n    <div className=\"bikemap_info\">\n      <div className=\"find_type_wrapper\">\n        <label htmlFor=\"find_bikes\">\n          <input\n            type=\"radio\"\n            name=\"find_type\"\n            id=\"find_bikes\"\n            checked={isFindingBikes}\n            onChange={() => {\n              return;\n            }}\n            hidden\n          />\n          <button\n            className=\"find_type typography-bold typography-button\"\n            onClick={handleFindingType}\n          >\n            <div className=\"find_type_img\">\n              {isFindingBikes ? (\n                <img src={bicycleWhiteSvg} alt=\"bicycle white icon\" />\n              ) : (\n                <img src={bicycle400Svg} alt=\"bicycle white icon\" />\n              )}\n            </div>\n            找單車\n          </button>\n        </label>\n        <label htmlFor=\"find_parks\">\n          <input\n            type=\"radio\"\n            name=\"find_type\"\n            id=\"find_parks\"\n            checked={!isFindingBikes}\n            onChange={() => {\n              return;\n            }}\n            hidden\n          />\n          <button\n            className=\"find_type typography-bold typography-button\"\n            onClick={handleFindingType}\n          >\n            <div className=\"find_type_img\">\n              {isFindingBikes ? (\n                <img src={parkingSvg} alt=\"parking icon\" />\n              ) : (\n                <img src={parkingWhiteSvg} alt=\"parking icon\" />\n              )}\n            </div>\n            找車位\n          </button>\n        </label>\n      </div>\n      {isLocatingUser ? locatingMessage : null}\n      <div className={`results_list ${expandResultList ? \"expand\" : \"\"}`}>\n        {getLocationButton}\n        {collapseTip}\n        <div className=\"filter\">\n          <input\n            className=\"typography-medium typography-caption\"\n            type=\"search\"\n            placeholder=\"搜尋站點或鄰近地點\"\n            value={keyword}\n            onChange={handleSetKeyword}\n          />\n          <button\n            className=\"sort typography-bold typography-caption\"\n            onClick={handleSortResults}\n          >\n            <img src={sortSvg} alt=\"sort icon\" />\n            排序\n          </button>\n        </div>\n        <div className=\"results\">\n          <BikeResults\n            keyword={keyword}\n            sortMethod={sortMethod}\n            bikesAvailable={bikesAvailable}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n","import \"./main.css\";\nimport { useState, useEffect } from \"react\";\nimport asyncGetGeolocation from \"../utils/getGeolocation\";\nimport { getAvailableBikes } from \"../utils/fetchTdxApi\";\n\nimport BikeMap from \"../components/bikeMap\";\nimport MapInfo from \"../components/mapInfo\";\n\nfunction Main(props) {\n  const TAIPEI_COORDINATES = [25.03746, 121.564558];\n  const [userPosition, setUserPosition] = useState(TAIPEI_COORDINATES);\n  const [bikesAvailable, setBikesAvailable] = useState([]);\n  const [isLocatingUser, setIsLocatingUser] = useState(false);\n  const [isFindingBikes, setIsFindingBikes] = useState(true);\n\n  function handleFindingType() {\n    setIsFindingBikes((bool) => !bool);\n  }\n\n  async function handleLocateUser() {\n    try {\n      setIsLocatingUser(true);\n      const userCoordinates = await asyncGetGeolocation();\n      setIsLocatingUser(false);\n      setUserPosition(userCoordinates);\n    } catch (error) {\n      setIsLocatingUser(false);\n      throw error;\n    }\n  }\n\n  // find User position on first render\n  //   useEffect(() => {\n  //     handleLocateUser();\n  //   }, []);\n\n  //fetch available bikes\n  useEffect(() => {\n    async function getBikes(userPosition) {\n      try {\n        const bikes = await getAvailableBikes(userPosition);\n        setBikesAvailable(bikes);\n      } catch (error) {\n        throw error;\n      }\n    }\n    getBikes(userPosition);\n  }, [userPosition]);\n\n  return (\n    <main>\n      <BikeMap\n        userPosition={userPosition}\n        bikesAvailable={bikesAvailable}\n        isFindingBikes={isFindingBikes}\n      />\n      <MapInfo\n        handleLocateUser={handleLocateUser}\n        bikesAvailable={bikesAvailable}\n        isLocatingUser={isLocatingUser}\n        handleFindingType={handleFindingType}\n        isFindingBikes={isFindingBikes}\n      />\n    </main>\n  );\n}\n\nexport default Main;\n","import React from \"react\";\nimport Header from \"./layout/header\";\nimport Main from \"./layout/main\";\n\nfunction App() {\n  return (\n    <>\n      <Header />\n      <Main />\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}